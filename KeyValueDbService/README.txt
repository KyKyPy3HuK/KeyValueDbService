# KeyValueDbService
Сервис-хранилище типа "ключ-значение"

Команда сборки, тестирования и запуска сервиса:
mvn spring-boot:run

Данное приложение-сервис, работающее по протоколу http и реализующее REST архитектуру, предоставляет функции создания, обновления и удаления записей типа ключ-значение с временем жизни (ttl) а также сохранения и загрузки снимков внутреннего хранилища записей (дампов).

По умолчанию сервер сервиса запускается по адресу http://localhost:8080

В файе конфигурации application.yml можно изменить название файла дампа, задержку вызова сборщика мусора и конфигурацию h2 хранилища.

Опмсание основных компонентов

TimeValueWithTtl - класс записей типа ключ-значение с ttl.
Запись предоставляет собой уникальный ключ строкового типа, и значение, которое может быть получено по этому ключу которое также имеет строковый тип. Дополнительно запись содержит свойство ttl - время жизни записи в хранилище сервиса, по истечению ttl запись будет запланирована на удаленение из хранилища. При отсутствии значение ttl запись не будет удалена по истечению времени. Ttl сохраняется в виде абсолютного значения: ttl = ТекущееДатаВремя + ВремяЖизниВСекундах.

DumpFileService - класс который позволяет сохранить состояние внутреннего хранилища сервиса в файл, а также перезаписать состояние хранилища из созданного ранее файла.

Дампа хранилища могут быть сохранены в двух режимах:

	DEFAULT - сохраняет все записи хранилища в файл, ttl записей записывается как есть, и они могут быть просрочены во время хранения в файле.
	
	SOFT - сохраняет все записи хранилища в файл и вычисляет остаток ttl для записей, после загрузки такого дампа фактическое время жизни записи останется таким же, как и и во время сохранения дампа, ttl не может быть просрочен во время хранения.

Все эндпоинты и ожидаемые ответы описаны в спецификации OpenApi.